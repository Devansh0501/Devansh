<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Romantic Birthday Surprise</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --accent:#ff3f88;
  --bg1:#ffe7f1;
  --bg2:#ffc6df;
  --card:#fff;
  --text:#3a2a33;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  min-height:100vh;
  overflow-x:hidden;
  overflow-y:auto; /* allow scrolling on mobile */
  font-family:Arial,Helvetica,sans-serif;
  background: radial-gradient(circle at 20% 20%, #fff1f8 0,#ffdcec 35%, #ffb8dd 75%, #ff95d2 100%);
  color:var(--text);
  -webkit-tap-highlight-color: transparent;
}

/* music toggle (autoplay fallback) */
#music-toggle {
  position: fixed;
  left: 14px;
  bottom: 14px;
  z-index:1200;
  background: linear-gradient(135deg,var(--accent),#ff8fc4);
  color:white;
  border:none;
  padding:8px 10px;
  border-radius:999px;
  box-shadow:0 8px 18px rgba(0,0,0,.18);
  cursor:pointer;
  display:none;
  font-weight:700;
  font-size:13px;
}

/* screens & panels */
.screen { position:relative; display:flex; align-items:center; justify-content:center; padding:18px; min-height:100vh; }
.panel {
  width:min(980px,96vw);
  background: rgba(255,255,255,0.94);
  border-radius:24px;
  padding:22px;
  box-shadow:0 20px 60px rgba(0,0,0,0.18);
  position:relative;
  overflow:hidden;
}

/* transitions */
.fade-slide-out { animation: fadeSlideOut 520ms cubic-bezier(.2,.9,.2,1) forwards; }
@keyframes fadeSlideOut{ from{opacity:1; transform:translateY(0)} to{opacity:0; transform:translateY(-18px) scale(.99)} }
.fade-slide-in { animation: fadeSlideIn 520ms cubic-bezier(.2,.9,.2,1) forwards; }
@keyframes fadeSlideIn{ from{opacity:0; transform:translateY(18px) scale(.995)} to{opacity:1; transform:translateY(0) scale(1)} }

/* landing layout */
.landing-inner { display:grid; grid-template-columns: 1fr 1fr; gap:18px; align-items:center; }
@media (max-width:820px){ .landing-inner { grid-template-columns: 1fr; text-align:center } }

#cake-image { width:260px; max-width:100%; animation:float 3s ease-in-out infinite; }
@keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

.birthday-text { display:flex; flex-direction:column; align-items:center; gap:6px; margin-bottom:10px; }
.birthday-line { display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }

/* letters (balloon style) */
.letter {
  padding:8px 10px; border-radius:999px; font-weight:800;
  background: radial-gradient(circle,#fff0f6,#ff9ec5);
  color:var(--accent); font-size:38px; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  opacity:0; transform:translateY(24px) scale(.6); transition:all .36s cubic-bezier(.2,.9,.2,1);
}
.letter.show{ opacity:1; transform:translateY(0) scale(1) }

/* responsive letter size */
@media (max-width:420px){ .letter{ font-size:30px; padding:6px 8px } }

/* landing text block */
.landing-text-block { text-align:left; }
@media (max-width:820px){ .landing-text-block { text-align:center } }

.primary-button{
  margin-top:14px; padding:12px 26px; border-radius:999px; border:none;
  background:linear-gradient(135deg,var(--accent),#ff9acb); color:#fff; font-weight:800; cursor:pointer;
  box-shadow:0 12px 30px rgba(255,63,136,.28); font-size:15px;
}

/* letter screen layout */
.inner-wrapper { display:grid; grid-template-columns: 3fr 2fr; gap:22px; width:100%; }
@media (max-width:820px){ .inner-wrapper{ grid-template-columns:1fr } }

.letter-card { background:var(--card); border-radius:18px; padding:18px; box-shadow:0 16px 44px rgba(0,0,0,.12); }
.letter-body { background: linear-gradient(135deg,#fffdfd,#fff5fb); border-radius:12px; padding:14px; min-height:280px; outline:none; }

/* her name reveal + heart burst container */
.her-name-reveal { text-align:center; margin-top:16px; opacity:0; transform:translateY(12px); transition:all .8s cubic-bezier(.2,.9,.2,1); position:relative; }
.her-name-reveal.show{ opacity:1; transform:translateY(0); }

/* click-heart & petals & burst hearts */
.heart-click { position:fixed; font-size:22px; color:#ff4f94; pointer-events:none; animation:heartFloat 2.2s ease-out forwards; z-index:1100; }
@keyframes heartFloat { from{transform:translateY(0) scale(1); opacity:1} to{transform:translateY(-140px) scale(1.8); opacity:0} }

.petal { position:fixed; top:-28px; font-size:20px; color:#ff8bbf; opacity:.85; pointer-events:none; animation:petalFall linear forwards; z-index:900; }
@keyframes petalFall { from{transform:translateY(-20px) rotate(0deg)} to{transform:translateY(110vh) rotate(360deg); opacity:0} }

/* burst-heart (for name reveal) */
.burst-heart {
  position:absolute;
  font-size:14px;
  color:#ff3f88;
  pointer-events:none;
  opacity:0;
  transform:translate(-50%,-50%) scale(.6);
  will-change: transform, opacity;
}

/* helper */
.small-note { font-size:12px; color:#8a7280; margin-top:8px; }
</style>
</head>
<body>

<button id="music-toggle">Play soft music â–¶ï¸Ž</button>

<!-- LANDING -->
<section id="landing-screen" class="screen" style="display:flex;">
  <div class="panel" id="landing-panel">
    <div class="landing-inner">
      <div style="display:flex;flex-direction:column;align-items:center;gap:10px">
        <img id="cake-image" src="cake.png" alt="cake">
        <div class="birthday-text" aria-hidden="true">
          <div class="birthday-line" id="line-1">
            <span class="letter">H</span><span class="letter">a</span><span class="letter">p</span><span class="letter">p</span><span class="letter">i</span><span class="letter">e</span><span class="letter">s</span><span class="letter">t</span>
          </div>
          <div class="birthday-line" id="line-2">
            <span class="letter">B</span><span class="letter">i</span><span class="letter">r</span><span class="letter">t</span><span class="letter">h</span><span class="letter">d</span><span class="letter">a</span><span class="letter">y</span>
          </div>
        </div>
      </div>

      <div class="landing-text-block">
        <div style="display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(255,105,180,.10);margin-bottom:10px;color:var(--accent);font-weight:700;">ðŸ’— Special birthday for you</div>
        <h2 style="margin:2px 0 8px;color:#2b1830">A rose-petal surpriseâ€¦ only for you</h2>
        <p style="margin:0 0 12px;color:#6b5566">Click the button below to open the letter I wrote for you.</p>

        <button id="open-letter-btn" class="primary-button" aria-controls="letter-screen">ðŸ’Œ Open your birthday letter</button>
        <div class="small-note">P.S. scroll to read â€” her name gets a special reveal at the end.</div>
      </div>
    </div>
  </div>
</section>

<!-- LETTER -->
<section id="letter-screen" class="screen" style="display:none;">
  <div class="panel" id="letter-panel" style="width:92%;">
    <div class="inner-wrapper">
      <div class="letter-card">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div style="background:rgba(255,105,180,.08);padding:6px;border-radius:8px;font-weight:700;color:var(--accent)">ðŸ’— From me to you</div>
          <h3 style="margin:0;font-family:Georgia,serif">A little note for your special day</h3>
        </div>

        <div id="letter-body" class="letter-body" contenteditable="true" aria-label="Editable letter body">
          <p>My love,</p>
          <p>Today is your day. Replace this with your own message â€” your memories, promises, and tiny jokes that only we understand.</p>
          <p>Always yours,<br><strong>[Your name here]</strong></p>
        </div>

        <div class="her-name-reveal" id="her-name-reveal" aria-hidden="true">
          <div style="font-size:12px;color:#7b6a73;letter-spacing:.12em;text-transform:uppercase">Always & only</div>
          <div id="her-name-text" style="font-family:Georgia,serif;font-size:26px;color:var(--accent);margin-top:6px">Priya</div>
          <!-- heart-burst will be spawned here via JS -->
        </div>

        <div style="margin-top:14px;display:flex;gap:10px;align-items:center">
          <button id="back-btn" class="primary-button" style="background:#fff;border:1px solid #ffd8e9;color:var(--accent)">â¬… Back to cake</button>
          <div class="small-note">Your text will remain until you refresh the page.</div>
        </div>
      </div>

      <aside class="letter-card" aria-hidden="true">
        <h4 style="margin-top:0">Highlights</h4>
        <p style="color:#7b6a73">A clean, romantic layout that keeps things sincere and tasteful. Her name appears with a cute reveal and a little heart burst.</p>
      </aside>
    </div>
  </div>
</section>

<!-- audio -->
<audio id="bg-music" loop preload="auto">
  <source src="soft-music.mp3" type="audio/mpeg">
</audio>

<script>
/* ---------------- audio with fade-in + autoplay fallback ---------------- */
const audio = document.getElementById('bg-music');
const musicToggle = document.getElementById('music-toggle');

async function fadeInAudio(targetVolume = 0.55, duration = 1800){
  try{
    audio.volume = 0.0;
    if (audio.paused) await audio.play();
  } catch(e){
    musicToggle.style.display = 'inline-block';
    return;
  }
  const start = performance.now();
  return new Promise(res=>{
    function tick(now){
      const t = Math.min(1,(now-start)/duration);
      audio.volume = t * targetVolume;
      if(t < 1) requestAnimationFrame(tick);
      else res();
    }
    requestAnimationFrame(tick);
  });
}

document.addEventListener('DOMContentLoaded', () => {
  fadeInAudio().catch(()=>{ musicToggle.style.display = 'inline-block' });
});

musicToggle.addEventListener('click', async ()=>{
  try{
    await audio.play();
    await fadeInAudio();
    musicToggle.style.display = 'none';
  } catch(e){}
});

/* ---------------- spawn click heart (skip open/back/music toggle) --------------- */
function spawnHeart(x,y){
  const node = document.createElement('div');
  node.className = 'heart-click';
  node.textContent = 'ðŸ’—';
  node.style.left = (x - 12) + 'px';
  node.style.top  = (y - 12) + 'px';
  document.body.appendChild(node);
  setTimeout(()=> node.remove(), 2200);
}

/* use pointerdown for better mobile responsiveness, but support click fallback */
function clickHandler(e){
  // ignore clicks on main buttons
  const tgt = e.target;
  if (tgt.closest('#open-letter-btn') || tgt.closest('#back-btn') || tgt.closest('#music-toggle')) return;
  const x = e.clientX || (e.touches && e.touches[0] && e.touches[0].clientX) || window.innerWidth/2;
  const y = e.clientY || (e.touches && e.touches[0] && e.touches[0].clientY) || window.innerHeight/2;
  spawnHeart(x,y);
}
window.addEventListener('pointerdown', clickHandler, { passive:true });
window.addEventListener('click', (e)=>{}); // keep click as fallback

/* --------------- falling petals --------------- */
function spawnPetal(){
  const p = document.createElement('div');
  p.className = 'petal';
  p.textContent = 'ðŸŒ¸';
  p.style.left = Math.random() * window.innerWidth + 'px';
  p.style.animationDuration = (6 + Math.random()*5) + 's';
  p.style.opacity = (0.45 + Math.random()*0.5);
  document.body.appendChild(p);
  setTimeout(()=> p.remove(), 12000);
}
setInterval(spawnPetal, 700);
spawnPetal();

/* --------------- reveal letters in two lines --------------- */
document.querySelectorAll('.letter').forEach((el,i)=> setTimeout(()=> el.classList.add('show'), i*120));

/* --------------- panels & transitions --------------- */
const landing = document.getElementById('landing-screen');
const letter  = document.getElementById('letter-screen');
const openBtn = document.getElementById('open-letter-btn');
const backBtn = document.getElementById('back-btn');
const herNameReveal = document.getElementById('her-name-reveal');
const herNameText = document.getElementById('her-name-text');

function showLetter(){
  const panel = document.getElementById('landing-panel');
  panel.classList.remove('fade-slide-in');
  panel.classList.add('fade-slide-out');
  panel.addEventListener('animationend', function onEnd(){
    panel.removeEventListener('animationend', onEnd);
    landing.style.display = 'none';
    letter.style.display = 'flex';
    const lp = document.getElementById('letter-panel');
    lp.classList.remove('fade-slide-out');
    lp.classList.add('fade-slide-in');
  }, { once:true });

  fadeInAudio(0.55,1200).catch(()=>{});
  // prepare and trigger name reveal + burst AFTER a short delay
  herNameReveal.classList.remove('show');
  setTimeout(()=> {
    herNameReveal.classList.add('show');
    // heart burst centered on the name text
    burstHeartsOnElement(herNameText, 14);
  }, 1600);
}

function showLanding(){
  const lp = document.getElementById('letter-panel');
  lp.classList.remove('fade-slide-in');
  lp.classList.add('fade-slide-out');
  lp.addEventListener('animationend', function onEnd(){
    lp.removeEventListener('animationend', onEnd);
    letter.style.display = 'none';
    landing.style.display = 'flex';
    const panel = document.getElementById('landing-panel');
    panel.classList.remove('fade-slide-out');
    panel.classList.add('fade-slide-in');
    // reset name reveal for next time
    herNameReveal.classList.remove('show');
  }, { once:true });
}

openBtn.addEventListener('click', showLetter);
backBtn.addEventListener('click', showLanding);

/* --------------- heart-burst on name reveal --------------- */
function burstHeartsOnElement(el, count=10){
  // get element center
  const rect = el.getBoundingClientRect();
  const cx = rect.left + rect.width/2;
  const cy = rect.top + rect.height/2;

  for(let i=0;i<count;i++){
    createBurstHeart(cx, cy, i);
  }
}
function createBurstHeart(cx, cy, i){
  const h = document.createElement('div');
  h.className = 'burst-heart';
  h.textContent = 'â¤';
  // position at center
  h.style.left = (cx) + 'px';
  h.style.top  = (cy) + 'px';
  document.body.appendChild(h);

  // random angle and distance
  const angle = (Math.random()*Math.PI*2);
  const distance = 40 + Math.random()*80;
  const dx = Math.cos(angle) * distance;
  const dy = Math.sin(angle) * distance - (20 + Math.random()*20);

  // random duration & delay
  const duration = 700 + Math.random()*500;
  const delay = i * 20;

  // animate using requestAnimationFrame
  h.style.transition = `transform ${duration}ms cubic-bezier(.2,.9,.2,1) ${delay}ms, opacity ${duration}ms linear ${delay}ms`;
  // force layout
  void h.offsetWidth;
  h.style.opacity = '1';
  h.style.transform = `translate(${dx}px, ${dy}px) scale(1.15)`;

  // fade out
  setTimeout(()=>{
    h.style.opacity = '0';
    h.style.transform = `translate(${dx*1.1}px, ${dy + 22}px) scale(.85)`;
  }, duration + delay - 80);

  // cleanup
  setTimeout(()=> h.remove(), duration + delay + 220);
}

/* Accessibility: allow Enter key on open/back for keyboard users */
openBtn.addEventListener('keyup', (e)=> { if(e.key==='Enter') showLetter(); });
backBtn.addEventListener('keyup', (e)=> { if(e.key==='Enter') showLanding(); });

</script>
</body>
</html>