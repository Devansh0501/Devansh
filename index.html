<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Romantic Birthday Surprise</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
:root{
  --accent:#ff3f88;
  --bg1:#ffe7f1;
  --bg2:#ffc6df;
  --card:#fff;
}
*{box-sizing:border-box}
body{
  margin:0;
  height:100vh;
  overflow:hidden;
  font-family:Arial,Helvetica,sans-serif;
  background: radial-gradient(circle at 20% 20%, #fff1f8 0,#ffdcec 35%, #ffb8dd 75%, #ff95d2 100%);
  color:#333;
}

/* ---------------- music control button (fallback) ---------------- */
#music-toggle {
  position: fixed;
  left: 14px;
  bottom: 14px;
  z-index:1200;
  background: linear-gradient(135deg,var(--accent),#ff8fc4);
  color:white;
  border:none;
  padding:8px 10px;
  border-radius:999px;
  box-shadow:0 8px 18px rgba(0,0,0,.18);
  cursor:pointer;
  display:none; /* shown only if autoplay blocked */
  font-weight:700;
  font-size:13px;
}

/* ---------------- screens and transition ---------------- */
.screen {
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  padding:18px;
  pointer-events:auto;
}

.hidden { display:none; }

.panel {
  width:min(920px,96vw);
  background: rgba(255,255,255,0.94);
  border-radius:24px;
  padding:22px;
  box-shadow:0 20px 60px rgba(0,0,0,0.18);
  position:relative;
  overflow:hidden;
}

/* transition helpers */
.fade-slide-out {
  animation: fadeSlideOut 520ms cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes fadeSlideOut {
  0% { opacity:1; transform: translateY(0) scale(1); }
  100% { opacity:0; transform: translateY(-18px) scale(.99); }
}
.fade-slide-in {
  animation: fadeSlideIn 520ms cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes fadeSlideIn {
  0% { opacity:0; transform: translateY(18px) scale(.995); }
  100% { opacity:1; transform: translateY(0) scale(1); }
}

/* ---------------- landing layout ---------------- */
.landing-inner { display:grid; grid-template-columns:1fr 1fr; gap:18px; align-items:center; }
@media(max-width:780px){ .landing-inner{ grid-template-columns:1fr; text-align:center } }

#cake-image { width:260px; max-width:100%; animation:float 3s ease-in-out infinite; }
@keyframes float{ 0%,100%{transform:translateY(0)} 50%{transform:translateY(-10px)} }

.birthday-text { display:flex; flex-wrap:wrap; justify-content:center; gap:6px; margin-bottom:8px; }
.letter {
  width:auto; height:auto; padding:8px; border-radius:999px; font-weight:700;
  background: radial-gradient(circle,#fff0f6,#ff9ec5);
  color:var(--accent); font-size:40px; display:inline-flex; align-items:center; justify-content:center;
  box-shadow:0 6px 18px rgba(0,0,0,.12);
  opacity:0; transform:translateY(20px) scale(.6); transition:all .36s cubic-bezier(.2,.9,.2,1);
}
.letter.show{ opacity:1; transform:translateY(0) scale(1) }

.landing-text-block { text-align:left }
@media(max-width:780px){ .landing-text-block{text-align:center} }

.primary-button{
  margin-top:14px; padding:12px 26px; border-radius:999px; border:none;
  background:linear-gradient(135deg,var(--accent),#ff9acb); color:#fff; font-weight:800; cursor:pointer;
  box-shadow:0 12px 30px rgba(255,63,136,.28); font-size:15px;
}

/* ---------------- letter screen layout ---------------- */
.inner-wrapper { display:grid; grid-template-columns: 3fr 2fr; gap:22px; width:100%; }
@media(max-width:780px){ .inner-wrapper{ grid-template-columns:1fr } }

.letter-card { background:var(--card); border-radius:18px; padding:18px; box-shadow:0 16px 44px rgba(0,0,0,.12); }
.letter-body { background: linear-gradient(135deg,#fffdfd,#fff5fb); border-radius:12px; padding:14px; min-height:280px; outline:none; }

/* her-name reveal */
.her-name-reveal { text-align:center; margin-top:16px; opacity:0; transform:translateY(12px); transition:all .8s cubic-bezier(.2,.9,.2,1); }
.her-name-reveal.show{ opacity:1; transform:translateY(0); }

/* ---------------- click hearts & petals ---------------- */
.heart-click { position:fixed; font-size:22px; color:#ff4f94; pointer-events:none; animation:heartFloat 2.2s ease-out forwards; z-index:1100; }
@keyframes heartFloat { from{transform:translateY(0) scale(1); opacity:1} to{transform:translateY(-140px) scale(1.8); opacity:0} }
.petal { position:fixed; top:-28px; font-size:20px; color:#ff8bbf; opacity:.85; pointer-events:none; animation:petalFall linear forwards; z-index:1000; }
@keyframes petalFall { from{transform:translateY(-20px) rotate(0deg)} to{transform:translateY(110vh) rotate(360deg); opacity:0} }

/* small helper for unobtrusive UI */
.small-note { font-size:12px; color:#8a7280; margin-top:8px; }
</style>
</head>
<body>

<!-- music fallback toggle (shown only if autoplay blocked) -->
<button id="music-toggle">Play soft music â–¶ï¸Ž</button>

<!-- LANDING -->
<section id="landing-screen" class="screen" style="display:flex;">
  <div class="panel">
    <div class="landing-inner">
      <div style="display:flex;flex-direction:column;align-items:center;gap:8px">
        <img id="cake-image" src="cake.png" alt="cake">
        <div class="birthday-text" aria-hidden="true">
          <span class="letter">H</span><span class="letter">a</span><span class="letter">p</span><span class="letter">p</span><span class="letter">i</span><span class="letter">e</span><span class="letter">s</span><span class="letter">t</span>
          <span class="letter">B</span><span class="letter">i</span><span class="letter">r</span><span class="letter">t</span><span class="letter">h</span><span class="letter">d</span><span class="letter">a</span><span class="letter">y</span>
        </div>
      </div>

      <div class="landing-text-block">
        <div style="display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;background:rgba(255,105,180,.10);margin-bottom:10px;color:var(--accent);font-weight:700;">ðŸ’— Special birthday for you</div>
        <h2 style="margin:2px 0 8px;color:#2b1830">A rose-petal surpriseâ€¦ only for you</h2>
        <p style="margin:0 0 12px;color:#6b5566">Click the button below to open the letter I wrote for you.</p>

        <button id="open-letter-btn" class="primary-button" aria-controls="letter-screen">ðŸ’Œ Open your birthday letter</button>
        <div class="small-note">P.S. scroll to read â€” her name gets a special reveal at the end.</div>
      </div>
    </div>
  </div>
</section>

<!-- LETTER -->
<section id="letter-screen" class="screen" style="display:none;">
  <div class="panel" style="width:92%;">
    <div class="inner-wrapper">
      <div class="letter-card">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px">
          <div style="background:rgba(255,105,180,.08);padding:6px;border-radius:8px;font-weight:700;color:var(--accent)">ðŸ’— From me to you</div>
          <h3 style="margin:0;font-family:Georgia,serif">A little note for your special day</h3>
        </div>

        <div class="letter-body" id="letter-body" contenteditable="true" aria-label="Editable letter body">
          <p>My love,</p>
          <p>Today is your day. Replace this with your own message â€” your memories, promises, and tiny jokes that only we understand.</p>
          <p>Always yours,<br><strong>[Your name here]</strong></p>
        </div>

        <div class="her-name-reveal" id="her-name-reveal" aria-hidden="true">
          <div style="font-size:12px;color:#7b6a73;letter-spacing:.12em;text-transform:uppercase">Always & only</div>
          <div style="font-family:Georgia,serif;font-size:26px;color:var(--accent);margin-top:6px" id="her-name-text">Priya</div>
        </div>

        <div style="margin-top:14px;display:flex;gap:10px;align-items:center">
          <button id="back-btn" class="primary-button" style="background:#fff;border:1px solid #ffd8e9;color:var(--accent)">â¬… Back to cake</button>
          <div class="small-note">Your text will remain until you refresh the page.</div>
        </div>
      </div>

      <aside class="letter-card" aria-hidden="true">
        <h4 style="margin-top:0">Highlights</h4>
        <p style="color:#7b6a73">A clean, romantic layout that keeps things sincere and tasteful. Her name appears with a little reveal animation at the end.</p>
      </aside>
    </div>
  </div>
</section>

<!-- audio (soft music attempted on load) -->
<audio id="bg-music" loop preload="auto">
  <source src="soft-music.mp3" type="audio/mpeg">
</audio>

<script>
/* ---------------- audio with fade-in + autoplay fallback ---------------- */
const audio = document.getElementById('bg-music');
const musicToggle = document.getElementById('music-toggle');

async function fadeInAudio(targetVolume = 0.55, duration = 1800){
  try{
    audio.volume = 0.0;
    if (audio.paused) await audio.play();
  } catch(e){
    // autoplay blocked â€” show fallback control
    musicToggle.style.display = 'inline-block';
    return;
  }
  const start = performance.now();
  return new Promise(res=>{
    function tick(now){
      const t = Math.min(1,(now-start)/duration);
      audio.volume = t * targetVolume;
      if(t < 1) requestAnimationFrame(tick);
      else res();
    }
    requestAnimationFrame(tick);
  });
}

/* Try autoplay when page opens */
document.addEventListener('DOMContentLoaded', () => {
  // attempt autoplay & fade-in
  fadeInAudio().catch(()=>{ musicToggle.style.display='inline-block' });
});

// fallback button if autoplay blocked
musicToggle.addEventListener('click', async ()=>{
  try{
    await audio.play();
    await fadeInAudio();
    musicToggle.style.display = 'none';
  } catch(e){
    // nothing: if play fails, leave button visible
  }
});

/* ---------------- click hearts (skip when clicking open/back) ---------------- */
function spawnHeart(x,y){
  const d = document.createElement('div');
  d.className='heart-click';
  d.textContent='ðŸ’—';
  d.style.left = (x - 12) + 'px';
  d.style.top  = (y - 12) + 'px';
  document.body.appendChild(d);
  setTimeout(()=> d.remove(), 2200);
}
document.addEventListener('click', e=>{
  // don't spawn when clicking the open or back buttons
  if (e.target.closest('#open-letter-btn') || e.target.closest('#back-btn') || e.target.closest('#music-toggle')) return;
  spawnHeart(e.clientX, e.clientY);
});

/* ---------------- gentle petals falling ---------------- */
function spawnPetal(){
  const p = document.createElement('div');
  p.className = 'petal';
  p.textContent = 'ðŸŒ¸';
  p.style.left = Math.random() * window.innerWidth + 'px';
  p.style.animationDuration = (6 + Math.random()*5) + 's';
  p.style.opacity = (0.5 + Math.random()*0.5);
  document.body.appendChild(p);
  setTimeout(()=> p.remove(), 12000);
}
setInterval(spawnPetal, 650);
spawnPetal();

/* ---------------- letters reveal ---------------- */
document.querySelectorAll('.letter').forEach((el,i)=> setTimeout(()=> el.classList.add('show'), i*140));

/* ---------------- smooth open/close transitions ---------------- */
const landing = document.getElementById('landing-screen');
const letter = document.getElementById('letter-screen');
const openBtn = document.getElementById('open-letter-btn');
const backBtn = document.getElementById('back-btn');
const herNameReveal = document.getElementById('her-name-reveal');

function hideLandingThenShowLetter(){
  // animate landing out
  const panel = landing.querySelector('.panel');
  panel.classList.remove('fade-slide-in');
  panel.classList.add('fade-slide-out');

  // after animation ends => display none, show letter with fade in
  panel.addEventListener('animationend', function onEnd(){
    panel.removeEventListener('animationend', onEnd);
    landing.style.display = 'none';
    // prepare letter
    letter.style.display = 'flex';
    const lp = letter.querySelector('.panel');
    // add class for incoming animation
    lp.classList.remove('fade-slide-out');
    lp.classList.add('fade-slide-in');
  }, { once:true });

  // audio ensure playing & fade to comfortable volume if not already
  fadeInAudio(0.55, 1200).catch(()=>{});
  // reveal name after a short delay
  herNameReveal.classList.remove('show');
  setTimeout(()=> herNameReveal.classList.add('show'), 2000);
}

function hideLetterThenShowLanding(){
  // animate letter panel out
  const lp = letter.querySelector('.panel');
  lp.classList.remove('fade-slide-in');
  lp.classList.add('fade-slide-out');

  lp.addEventListener('animationend', function onEnd(){
    lp.removeEventListener('animationend', onEnd);
    letter.style.display = 'none';
    // show landing
    landing.style.display = 'flex';
    const panel = landing.querySelector('.panel');
    panel.classList.remove('fade-slide-out');
    panel.classList.add('fade-slide-in');
    // hide name reveal for next open
    herNameReveal.classList.remove('show');
  }, { once:true });
}

openBtn.addEventListener('click', hideLandingThenShowLetter);
backBtn.addEventListener('click', hideLetterThenShowLanding);

/* optional: stop music on back - currently left playing */
</script>
</body>
</html>